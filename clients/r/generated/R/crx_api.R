# Adobe Experience Manager (AEM) API
#
# Swagger AEM is an OpenAPI specification for Adobe Experience Manager (AEM) API
#
# The version of the OpenAPI document: 3.5.0-pre.0
# Contact: opensource@shinesolutions.com
# Generated by: https://openapi-generator.tech

#' @docType class
#' @title Crx operations
#' @description openapi.Crx
#' @format An \code{R6Class} generator object
#' @field apiClient Handles the client-server communication.
#'
#' @section Methods:
#' \describe{
#' \strong{ GetCrxdeStatus } \emph{  }
#' 
#'
#' \itemize{
#'
#'
#' \item status code : 200 | CRXDE is enabled
#'
#' \item return type : character 
#' \item response headers :
#'
#' \tabular{ll}{
#' }
#' \item status code : 404 | CRXDE is disabled
#'
#' \item return type : character 
#' \item response headers :
#'
#' \tabular{ll}{
#' }
#' }
#'
#' \strong{ GetInstallStatus } \emph{  }
#' 
#'
#' \itemize{
#' \item \emph{ @returnType } \link{InstallStatus} \cr
#'
#'
#' \item status code : 200 | Retrieved CRX package manager install status
#'
#' \item return type : InstallStatus 
#' \item response headers :
#'
#' \tabular{ll}{
#' }
#' \item status code : 0 | Default response
#'
#' \item return type : character 
#' \item response headers :
#'
#' \tabular{ll}{
#' }
#' }
#'
#' \strong{ GetPackageManagerServlet } \emph{  }
#' 
#'
#' \itemize{
#'
#'
#' \item status code : 404 | Package Manager Servlet is disabled
#'
#' \item return type : character 
#' \item response headers :
#'
#' \tabular{ll}{
#' }
#' \item status code : 405 | Package Manager Servlet is active
#'
#' \item return type : character 
#' \item response headers :
#'
#' \tabular{ll}{
#' }
#' }
#'
#' \strong{ PostPackageService } \emph{  }
#' 
#'
#' \itemize{
#' \item \emph{ @param } cmd character
#'
#'
#' \item status code : 0 | Default response
#'
#' \item return type : character 
#' \item response headers :
#'
#' \tabular{ll}{
#' }
#' }
#'
#' \strong{ PostPackageServiceJson } \emph{  }
#' 
#'
#' \itemize{
#' \item \emph{ @param } path character
#' \item \emph{ @param } cmd character
#' \item \emph{ @param } group.name character
#' \item \emph{ @param } package.name character
#' \item \emph{ @param } package.version character
#' \item \emph{ @param } .charset. character
#' \item \emph{ @param } force character
#' \item \emph{ @param } recursive character
#' \item \emph{ @param } package data.frame
#'
#'
#' \item status code : 0 | Default response
#'
#' \item return type : character 
#' \item response headers :
#'
#' \tabular{ll}{
#' }
#' }
#'
#' \strong{ PostPackageUpdate } \emph{  }
#' 
#'
#' \itemize{
#' \item \emph{ @param } group.name character
#' \item \emph{ @param } package.name character
#' \item \emph{ @param } version character
#' \item \emph{ @param } path character
#' \item \emph{ @param } filter character
#' \item \emph{ @param } .charset. character
#'
#'
#' \item status code : 0 | Default response
#'
#' \item return type : character 
#' \item response headers :
#'
#' \tabular{ll}{
#' }
#' }
#'
#' \strong{ PostSetPassword } \emph{  }
#' 
#'
#' \itemize{
#' \item \emph{ @param } old character
#' \item \emph{ @param } plain character
#' \item \emph{ @param } verify character
#'
#'
#' \item status code : 0 | Default response
#'
#' \item return type : character 
#' \item response headers :
#'
#' \tabular{ll}{
#' }
#' }
#'
#' }
#'
#'
#' @examples
#' \dontrun{
#' ####################  GetCrxdeStatus  ####################
#'
#' library(openapi)
#'
#' api.instance <- CrxApi$new()
#'
#' #Configure HTTP basic authorization: aemAuth
#' # provide your username in the user-serial format
#' api.instance$apiClient$username <- '<user-serial>'; 
#' # provide your api key generated using the developer portal
#' api.instance$apiClient$password <- '<api_key>';
#'
#' result <- api.instance$GetCrxdeStatus()
#'
#'
#' ####################  GetInstallStatus  ####################
#'
#' library(openapi)
#'
#' api.instance <- CrxApi$new()
#'
#' #Configure HTTP basic authorization: aemAuth
#' # provide your username in the user-serial format
#' api.instance$apiClient$username <- '<user-serial>'; 
#' # provide your api key generated using the developer portal
#' api.instance$apiClient$password <- '<api_key>';
#'
#' result <- api.instance$GetInstallStatus()
#'
#'
#' ####################  GetPackageManagerServlet  ####################
#'
#' library(openapi)
#'
#' api.instance <- CrxApi$new()
#'
#' #Configure HTTP basic authorization: aemAuth
#' # provide your username in the user-serial format
#' api.instance$apiClient$username <- '<user-serial>'; 
#' # provide your api key generated using the developer portal
#' api.instance$apiClient$password <- '<api_key>';
#'
#' result <- api.instance$GetPackageManagerServlet()
#'
#'
#' ####################  PostPackageService  ####################
#'
#' library(openapi)
#' var.cmd <- 'cmd_example' # character | 
#'
#' api.instance <- CrxApi$new()
#'
#' #Configure HTTP basic authorization: aemAuth
#' # provide your username in the user-serial format
#' api.instance$apiClient$username <- '<user-serial>'; 
#' # provide your api key generated using the developer portal
#' api.instance$apiClient$password <- '<api_key>';
#'
#' result <- api.instance$PostPackageService(var.cmd)
#'
#'
#' ####################  PostPackageServiceJson  ####################
#'
#' library(openapi)
#' var.path <- 'path_example' # character | 
#' var.cmd <- 'cmd_example' # character | 
#' var.group.name <- 'group.name_example' # character | 
#' var.package.name <- 'package.name_example' # character | 
#' var.package.version <- 'package.version_example' # character | 
#' var..charset. <- '.charset._example' # character | 
#' var.force <- 'force_example' # character | 
#' var.recursive <- 'recursive_example' # character | 
#' var.package <- File.new('/path/to/file') # data.frame | 
#'
#' api.instance <- CrxApi$new()
#'
#' #Configure HTTP basic authorization: aemAuth
#' # provide your username in the user-serial format
#' api.instance$apiClient$username <- '<user-serial>'; 
#' # provide your api key generated using the developer portal
#' api.instance$apiClient$password <- '<api_key>';
#'
#' result <- api.instance$PostPackageServiceJson(var.path, var.cmd, group.name=var.group.name, package.name=var.package.name, package.version=var.package.version, .charset.=var..charset., force=var.force, recursive=var.recursive, package=var.package)
#'
#'
#' ####################  PostPackageUpdate  ####################
#'
#' library(openapi)
#' var.group.name <- 'group.name_example' # character | 
#' var.package.name <- 'package.name_example' # character | 
#' var.version <- 'version_example' # character | 
#' var.path <- 'path_example' # character | 
#' var.filter <- 'filter_example' # character | 
#' var..charset. <- '.charset._example' # character | 
#'
#' api.instance <- CrxApi$new()
#'
#' #Configure HTTP basic authorization: aemAuth
#' # provide your username in the user-serial format
#' api.instance$apiClient$username <- '<user-serial>'; 
#' # provide your api key generated using the developer portal
#' api.instance$apiClient$password <- '<api_key>';
#'
#' result <- api.instance$PostPackageUpdate(var.group.name, var.package.name, var.version, var.path, filter=var.filter, .charset.=var..charset.)
#'
#'
#' ####################  PostSetPassword  ####################
#'
#' library(openapi)
#' var.old <- 'old_example' # character | 
#' var.plain <- 'plain_example' # character | 
#' var.verify <- 'verify_example' # character | 
#'
#' api.instance <- CrxApi$new()
#'
#' #Configure HTTP basic authorization: aemAuth
#' # provide your username in the user-serial format
#' api.instance$apiClient$username <- '<user-serial>'; 
#' # provide your api key generated using the developer portal
#' api.instance$apiClient$password <- '<api_key>';
#'
#' result <- api.instance$PostSetPassword(var.old, var.plain, var.verify)
#'
#'
#' }
#' @importFrom R6 R6Class
#' @importFrom base64enc base64encode
#' @export
CrxApi <- R6::R6Class(
  'CrxApi',
  public = list(
    apiClient = NULL,
    initialize = function(apiClient){
      if (!missing(apiClient)) {
        self$apiClient <- apiClient
      }
      else {
        self$apiClient <- ApiClient$new()
      }
    },
    GetCrxdeStatus = function(...){
      apiResponse <- self$GetCrxdeStatusWithHttpInfo(...)
      resp <- apiResponse$response
      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        apiResponse$content
      } else if (httr::status_code(resp) >= 300 && httr::status_code(resp) <= 399) {
        apiResponse
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        apiResponse
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        apiResponse
      }
    },

    GetCrxdeStatusWithHttpInfo = function(...){
      args <- list(...)
      queryParams <- list()
      headerParams <- c()

      body <- NULL
      urlPath <- "/crx/server/crx.default/jcr:root/.1.json"
      # HTTP basic auth
      headerParams['Authorization'] <- paste("Basic", base64enc::base64encode(charToRaw(paste(self$apiClient$username, self$apiClient$password, sep=":"))))

      resp <- self$apiClient$CallApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "GET",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        deserializedRespObj <- tryCatch(
          self$apiClient$deserialize(resp, "character", loadNamespace("openapi")),
          error = function(e){
             stop("Failed to deserialize response")
          }
        )
        ApiResponse$new(deserializedRespObj, resp)
      } else if (httr::status_code(resp) >= 300 && httr::status_code(resp) <= 399) {
        ApiResponse$new(paste("Server returned " , httr::status_code(resp) , " response status code."), resp)
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        ApiResponse$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        ApiResponse$new("API server error", resp)
      }
    },
    GetInstallStatus = function(...){
      apiResponse <- self$GetInstallStatusWithHttpInfo(...)
      resp <- apiResponse$response
      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        apiResponse$content
      } else if (httr::status_code(resp) >= 300 && httr::status_code(resp) <= 399) {
        apiResponse
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        apiResponse
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        apiResponse
      }
    },

    GetInstallStatusWithHttpInfo = function(...){
      args <- list(...)
      queryParams <- list()
      headerParams <- c()

      body <- NULL
      urlPath <- "/crx/packmgr/installstatus.jsp"
      # HTTP basic auth
      headerParams['Authorization'] <- paste("Basic", base64enc::base64encode(charToRaw(paste(self$apiClient$username, self$apiClient$password, sep=":"))))

      resp <- self$apiClient$CallApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "GET",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        deserializedRespObj <- tryCatch(
          self$apiClient$deserialize(resp, "InstallStatus", loadNamespace("openapi")),
          error = function(e){
             stop("Failed to deserialize response")
          }
        )
        ApiResponse$new(deserializedRespObj, resp)
      } else if (httr::status_code(resp) >= 300 && httr::status_code(resp) <= 399) {
        ApiResponse$new(paste("Server returned " , httr::status_code(resp) , " response status code."), resp)
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        ApiResponse$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        ApiResponse$new("API server error", resp)
      }
    },
    GetPackageManagerServlet = function(...){
      apiResponse <- self$GetPackageManagerServletWithHttpInfo(...)
      resp <- apiResponse$response
      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        apiResponse$content
      } else if (httr::status_code(resp) >= 300 && httr::status_code(resp) <= 399) {
        apiResponse
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        apiResponse
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        apiResponse
      }
    },

    GetPackageManagerServletWithHttpInfo = function(...){
      args <- list(...)
      queryParams <- list()
      headerParams <- c()

      body <- NULL
      urlPath <- "/crx/packmgr/service/script.html"
      # HTTP basic auth
      headerParams['Authorization'] <- paste("Basic", base64enc::base64encode(charToRaw(paste(self$apiClient$username, self$apiClient$password, sep=":"))))

      resp <- self$apiClient$CallApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "GET",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        ApiResponse$new(NULL, resp)
      } else if (httr::status_code(resp) >= 300 && httr::status_code(resp) <= 399) {
        ApiResponse$new(paste("Server returned " , httr::status_code(resp) , " response status code."), resp)
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        ApiResponse$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        ApiResponse$new("API server error", resp)
      }
    },
    PostPackageService = function(cmd, ...){
      apiResponse <- self$PostPackageServiceWithHttpInfo(cmd, ...)
      resp <- apiResponse$response
      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        apiResponse$content
      } else if (httr::status_code(resp) >= 300 && httr::status_code(resp) <= 399) {
        apiResponse
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        apiResponse
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        apiResponse
      }
    },

    PostPackageServiceWithHttpInfo = function(cmd, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- c()

      if (missing(`cmd`)) {
        stop("Missing required parameter `cmd`.")
      }

      queryParams['cmd'] <- cmd

      body <- NULL
      urlPath <- "/crx/packmgr/service.jsp"
      # HTTP basic auth
      headerParams['Authorization'] <- paste("Basic", base64enc::base64encode(charToRaw(paste(self$apiClient$username, self$apiClient$password, sep=":"))))

      resp <- self$apiClient$CallApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "POST",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        deserializedRespObj <- tryCatch(
          self$apiClient$deserialize(resp, "character", loadNamespace("openapi")),
          error = function(e){
             stop("Failed to deserialize response")
          }
        )
        ApiResponse$new(deserializedRespObj, resp)
      } else if (httr::status_code(resp) >= 300 && httr::status_code(resp) <= 399) {
        ApiResponse$new(paste("Server returned " , httr::status_code(resp) , " response status code."), resp)
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        ApiResponse$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        ApiResponse$new("API server error", resp)
      }
    },
    PostPackageServiceJson = function(path, cmd, group.name=NULL, package.name=NULL, package.version=NULL, .charset.=NULL, force=NULL, recursive=NULL, package=NULL, ...){
      apiResponse <- self$PostPackageServiceJsonWithHttpInfo(path, cmd, group.name, package.name, package.version, .charset., force, recursive, package, ...)
      resp <- apiResponse$response
      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        apiResponse$content
      } else if (httr::status_code(resp) >= 300 && httr::status_code(resp) <= 399) {
        apiResponse
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        apiResponse
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        apiResponse
      }
    },

    PostPackageServiceJsonWithHttpInfo = function(path, cmd, group.name=NULL, package.name=NULL, package.version=NULL, .charset.=NULL, force=NULL, recursive=NULL, package=NULL, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- c()

      if (missing(`path`)) {
        stop("Missing required parameter `path`.")
      }

      if (missing(`cmd`)) {
        stop("Missing required parameter `cmd`.")
      }

      queryParams['cmd'] <- cmd

      queryParams['groupName'] <- group.name

      queryParams['packageName'] <- package.name

      queryParams['packageVersion'] <- package.version

      queryParams['_charset_'] <- .charset.

      queryParams['force'] <- force

      queryParams['recursive'] <- recursive

      body <- list(
        "package" = httr::upload_file(package)
      )

      urlPath <- "/crx/packmgr/service/.json/{path}"
      if (!missing(`path`)) {
        urlPath <- gsub(paste0("\\{", "path", "\\}"), URLencode(as.character(`path`), reserved = TRUE), urlPath)
      }

      # HTTP basic auth
      headerParams['Authorization'] <- paste("Basic", base64enc::base64encode(charToRaw(paste(self$apiClient$username, self$apiClient$password, sep=":"))))

      resp <- self$apiClient$CallApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "POST",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        deserializedRespObj <- tryCatch(
          self$apiClient$deserialize(resp, "character", loadNamespace("openapi")),
          error = function(e){
             stop("Failed to deserialize response")
          }
        )
        ApiResponse$new(deserializedRespObj, resp)
      } else if (httr::status_code(resp) >= 300 && httr::status_code(resp) <= 399) {
        ApiResponse$new(paste("Server returned " , httr::status_code(resp) , " response status code."), resp)
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        ApiResponse$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        ApiResponse$new("API server error", resp)
      }
    },
    PostPackageUpdate = function(group.name, package.name, version, path, filter=NULL, .charset.=NULL, ...){
      apiResponse <- self$PostPackageUpdateWithHttpInfo(group.name, package.name, version, path, filter, .charset., ...)
      resp <- apiResponse$response
      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        apiResponse$content
      } else if (httr::status_code(resp) >= 300 && httr::status_code(resp) <= 399) {
        apiResponse
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        apiResponse
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        apiResponse
      }
    },

    PostPackageUpdateWithHttpInfo = function(group.name, package.name, version, path, filter=NULL, .charset.=NULL, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- c()

      if (missing(`group.name`)) {
        stop("Missing required parameter `group.name`.")
      }

      if (missing(`package.name`)) {
        stop("Missing required parameter `package.name`.")
      }

      if (missing(`version`)) {
        stop("Missing required parameter `version`.")
      }

      if (missing(`path`)) {
        stop("Missing required parameter `path`.")
      }

      queryParams['groupName'] <- group.name

      queryParams['packageName'] <- package.name

      queryParams['version'] <- version

      queryParams['path'] <- path

      queryParams['filter'] <- filter

      queryParams['_charset_'] <- .charset.

      body <- NULL
      urlPath <- "/crx/packmgr/update.jsp"
      # HTTP basic auth
      headerParams['Authorization'] <- paste("Basic", base64enc::base64encode(charToRaw(paste(self$apiClient$username, self$apiClient$password, sep=":"))))

      resp <- self$apiClient$CallApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "POST",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        deserializedRespObj <- tryCatch(
          self$apiClient$deserialize(resp, "character", loadNamespace("openapi")),
          error = function(e){
             stop("Failed to deserialize response")
          }
        )
        ApiResponse$new(deserializedRespObj, resp)
      } else if (httr::status_code(resp) >= 300 && httr::status_code(resp) <= 399) {
        ApiResponse$new(paste("Server returned " , httr::status_code(resp) , " response status code."), resp)
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        ApiResponse$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        ApiResponse$new("API server error", resp)
      }
    },
    PostSetPassword = function(old, plain, verify, ...){
      apiResponse <- self$PostSetPasswordWithHttpInfo(old, plain, verify, ...)
      resp <- apiResponse$response
      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        apiResponse$content
      } else if (httr::status_code(resp) >= 300 && httr::status_code(resp) <= 399) {
        apiResponse
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        apiResponse
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        apiResponse
      }
    },

    PostSetPasswordWithHttpInfo = function(old, plain, verify, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- c()

      if (missing(`old`)) {
        stop("Missing required parameter `old`.")
      }

      if (missing(`plain`)) {
        stop("Missing required parameter `plain`.")
      }

      if (missing(`verify`)) {
        stop("Missing required parameter `verify`.")
      }

      queryParams['old'] <- old

      queryParams['plain'] <- plain

      queryParams['verify'] <- verify

      body <- NULL
      urlPath <- "/crx/explorer/ui/setpassword.jsp"
      # HTTP basic auth
      headerParams['Authorization'] <- paste("Basic", base64enc::base64encode(charToRaw(paste(self$apiClient$username, self$apiClient$password, sep=":"))))

      resp <- self$apiClient$CallApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "POST",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        deserializedRespObj <- tryCatch(
          self$apiClient$deserialize(resp, "character", loadNamespace("openapi")),
          error = function(e){
             stop("Failed to deserialize response")
          }
        )
        ApiResponse$new(deserializedRespObj, resp)
      } else if (httr::status_code(resp) >= 300 && httr::status_code(resp) <= 399) {
        ApiResponse$new(paste("Server returned " , httr::status_code(resp) , " response status code."), resp)
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        ApiResponse$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        ApiResponse$new("API server error", resp)
      }
    }
  )
)
